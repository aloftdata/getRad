---
title: "Getting started with `getRad`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Getting started with `getRad`}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

Currently `getRad` focuses on retrieving data from weather radars that are relevant for biological research. Different data is available for these radars. First there it the metadata describing the location and other static information for the weather radars. Next there is the polar volume data. This contains all the scans/sweeps made in one iteration of the scanning pattern, typically collected every 5 minutes. Last there is the vertical profile data which extracts one point estimate with the vertical distribution biological activity from a polar volume. This information is typically far less volumes compared to the polar volume data. 

In this vignette we will show examples for all these datasets in independent section. This shows how the information can be downloaded and some typical outputs from each data type.

# Radar information {#wr}

The `weather_radars()` function gets the for all weather radars in the opera network. This data is on the fly read from the [opera database](https://www.eumetnet.eu/wp-content/themes/aeron-child/observations-programme/current-activities/opera/database/OPERA_Database/index.html) and includes both active and retired radars.

```{r setup}
library(getRad)
radars <- weather_radars()
radars
```

An important column is the `odimcode` as this is used as an identifier for the radar in other functions. The odim code typically consists of 5 characters, the first two corresponding the the country, the last three to the name of the radar. This is typically a city close by. 

Using this we can, for example, visualize the radars presently active according to the frequency band they use. 

```{r radar_map}
require(leaflet)
radarsActive <- subset(radars, status == 1)
pal <- colorFactor(c("navy", "red", "darkgreen"), domain = c("C", "S", "X"))
leaflet(width = "100%") |>
  addTiles() |>
  addCircleMarkers(data = radarsActive, label = ~odimcode, color = ~ pal(band)) |>
  addLegend(pal = pal, values = c("C", "S", "X"))
```


# Vertical Profile Time Series {#vpts}

```{r setup2}
library(getRad)
```

# Polar volume's {#pvol}

The `get_pvol()` function is used to retrieve polar volumes. They are returned as a pvol (see: `?bioRad::summary.pvol`) object. Currently a selected number of countries is supported (see: `vignette("supported_countries")`). As data is retrieved form country specific repositories there are sometimes specific requirements, the package guides you for setting this up (e.g. set api keys, temporal limitations and installing specific converters or R packages).

```{r setup3}
library(getRad)
```


